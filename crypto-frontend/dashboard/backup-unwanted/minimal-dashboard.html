<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Minimal Dashboard - MotionFalcon</title>
    <link href="./css/style.css" rel="stylesheet">
    <style>
        .minimal-container { 
            max-width: 1200px; 
            margin: 0 auto; 
            padding: 20px; 
            background: white; 
            border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
        }
        .status-box { 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 5px; 
            border-left: 4px solid #007bff; 
            background: #f8f9fa; 
        }
        .status-box.success { border-left-color: #28a745; background: #d4edda; }
        .status-box.error { border-left-color: #dc3545; background: #f8d7da; }
        .status-box.loading { border-left-color: #ffc107; background: #fff3cd; }
        .test-button { 
            padding: 10px 20px; 
            margin: 5px; 
            background: #007bff; 
            color: white; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
        }
        .test-button:hover { background: #0056b3; }
        .data-display { 
            background: #f8f9fa; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 10px 0; 
            font-family: monospace; 
            white-space: pre-wrap; 
        }
    </style>
</head>
<body>
    <div class="minimal-container">
        <h1>üöÄ Minimal Dashboard Test</h1>
        <p>This page bypasses all complex logic to test basic functionality.</p>
        
        <div class="status-box" id="overall-status">
            <h3>System Status</h3>
            <p>Checking components...</p>
        </div>

        <div class="status-box" id="backend-status">
            <h3>Backend Connection</h3>
            <button class="test-button" onclick="testBackend()">Test Backend</button>
            <div id="backend-result"></div>
        </div>

        <div class="status-box" id="api-status">
            <h3>API Integration</h3>
            <button class="test-button" onclick="testAPI()">Test API</button>
            <div id="api-result"></div>
        </div>

        <div class="status-box" id="auth-status">
            <h3>Authentication</h3>
            <button class="test-button" onclick="testAuth()">Test Login</button>
            <div id="auth-result"></div>
        </div>

        <div class="status-box" id="data-status">
            <h3>Data Loading</h3>
            <button class="test-button" onclick="testData()">Load Market Data</button>
            <div id="data-result"></div>
        </div>

        <div class="status-box">
            <h3>Quick Actions</h3>
            <button class="test-button" onclick="goToLogin()">Go to Login</button>
            <button class="test-button" onclick="goToDashboard()">Go to Full Dashboard</button>
            <button class="test-button" onclick="clearStorage()">Clear Storage</button>
        </div>
    </div>

    <script>
        // Simple API functions without complex error handling
        const API_BASE = 'http://127.0.0.1:8000';
        
        function updateStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.innerHTML = `<h3>${element.querySelector('h3').textContent}</h3><p>${message}</p>`;
            element.className = `status-box ${type}`;
        }

        function showResult(elementId, content, isSuccess = true) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="data-display">${content}</div>`;
        }

        async function testBackend() {
            updateStatus('backend-status', 'Testing backend connection...', 'loading');
            try {
                const response = await fetch(`${API_BASE}/`);
                const data = await response.json();
                updateStatus('backend-status', '‚úÖ Backend is running!', 'success');
                showResult('backend-result', `Status: ${response.status}\nData: ${JSON.stringify(data, null, 2)}`);
            } catch (error) {
                updateStatus('backend-status', '‚ùå Backend connection failed', 'error');
                showResult('backend-result', `Error: ${error.message}`);
            }
        }

        async function testAPI() {
            updateStatus('api-status', 'Testing API endpoints...', 'loading');
            try {
                const response = await fetch(`${API_BASE}/trade/prices`);
                const data = await response.json();
                updateStatus('api-status', '‚úÖ API is working!', 'success');
                showResult('api-result', `Market data loaded: ${data.prices?.length || 0} coins available`);
            } catch (error) {
                updateStatus('api-status', '‚ùå API test failed', 'error');
                showResult('api-result', `Error: ${error.message}`);
            }
        }

        async function testAuth() {
            updateStatus('auth-status', 'Testing authentication...', 'loading');
            try {
                const response = await fetch(`${API_BASE}/auth/register`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username: 'minimaltest',
                        email: 'minimal@test.com',
                        password: 'testpass123'
                    })
                });
                const data = await response.json();
                updateStatus('auth-status', '‚úÖ Auth endpoint working!', 'success');
                showResult('auth-result', `Response: ${JSON.stringify(data, null, 2)}`);
            } catch (error) {
                updateStatus('auth-status', '‚ùå Auth test failed', 'error');
                showResult('auth-result', `Error: ${error.message}`);
            }
        }

        async function testData() {
            updateStatus('data-status', 'Loading market data...', 'loading');
            try {
                const response = await fetch(`${API_BASE}/trade/prices`);
                const data = await response.json();
                updateStatus('data-status', '‚úÖ Data loaded successfully!', 'success');
                showResult('data-result', `Loaded ${data.prices?.length || 0} coins:\n${JSON.stringify(data.prices?.slice(0, 3), null, 2)}`);
            } catch (error) {
                updateStatus('data-status', '‚ùå Data loading failed', 'error');
                showResult('data-result', `Error: ${error.message}`);
            }
        }

        function goToLogin() {
            window.location.href = 'page-login.html';
        }

        function goToDashboard() {
            window.location.href = 'index.html';
        }

        function clearStorage() {
            localStorage.clear();
            sessionStorage.clear();
            updateStatus('overall-status', 'Storage cleared!', 'success');
        }

        // Auto-run basic tests
        window.onload = function() {
            updateStatus('overall-status', 'System ready for testing', 'success');
            setTimeout(testBackend, 1000);
        };
    </script>
</body>
</html> 